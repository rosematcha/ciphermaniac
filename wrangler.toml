# Cloudflare Pages configuration for Ciphermaniac
name = "ciphermaniac"
compatibility_date = "2023-10-30"

# Run the frontend TypeScript build before deploying Pages so JS ends up in public/
[build]
command = "npm run build"
cwd = "."

# Pages build output directory (required by Wrangler/Pages)
pages_build_output_dir = "public"

# KV namespace binding for price data storage
[[kv_namespaces]]
binding = "PRICE_DATA"
id = "c43f84feaa1049488390313c619610d8"

# R2 bucket binding for report storage
[[r2_buckets]]
bucket_name = "ciphermaniac-reports"
binding = "REPORTS"

# Production environment configuration
[env.production]

# KV namespace binding for production
[[env.production.kv_namespaces]]
binding = "PRICE_DATA"
id = "c43f84feaa1049488390313c619610d8"

# R2 bucket binding for production
[[env.production.r2_buckets]]
bucket_name = "ciphermaniac-reports"
binding = "REPORTS"

# Environment variables (set these in Cloudflare dashboard)
[env.production.vars]
